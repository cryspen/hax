(*****************************************)
(* Preamble *)
(*****************************************)

channel c.

fun construct_fail() : bitstring
reduc construct_fail() = fail.

type Option.
fun Some(bitstring): Option [data].
fun None(): Option [data].
letfun Option_err() = let x = construct_fail() in None().

const empty: bitstring.
letfun bitstring_default() = empty.
letfun bitstring_err() = let x = construct_fail() in bitstring_default().

letfun nat_default() = 0.
fun nat_to_bitstring(nat): bitstring.
letfun nat_err() = let x = construct_fail() in nat_default().

letfun bool_default() = false.


(*****************************************)
(* Types and Constructors *)
(*****************************************)

type tests__legacy__constructor_as_closure__t_Test.

fun tests__legacy__constructor_as_closure__t_Test_to_bitstring(
      tests__legacy__constructor_as_closure__t_Test
    )
    : bitstring [typeConverter].
fun tests__legacy__constructor_as_closure__t_Test_from_bitstring(bitstring)
    : tests__legacy__constructor_as_closure__t_Test [typeConverter].
const tests__legacy__constructor_as_closure__t_Test_default_value: tests__legacy__constructor_as_closure__t_Test.
letfun tests__legacy__constructor_as_closure__t_Test_default() =
       tests__legacy__constructor_as_closure__t_Test_default_value.
letfun tests__legacy__constructor_as_closure__t_Test_err() =
       let x = construct_fail() in tests__legacy__constructor_as_closure__t_Test_default_value.
fun tests__legacy__constructor_as_closure__Test(nat)
    : tests__legacy__constructor_as_closure__t_Test [data].
reduc forall tests__legacy__constructor_as_closure__0: nat;
    accessor_tests__legacy__constructor_as_closure__t_Test_tests__legacy__constructor_as_closure__0(
      tests__legacy__constructor_as_closure__Test(
        tests__legacy__constructor_as_closure__0
      )
    ) = tests__legacy__constructor_as_closure__0.

type tests__legacy__constructor_as_closure__t_Context.

fun tests__legacy__constructor_as_closure__t_Context_to_bitstring(
      tests__legacy__constructor_as_closure__t_Context
    )
    : bitstring [typeConverter].
fun tests__legacy__constructor_as_closure__t_Context_from_bitstring(bitstring)
    : tests__legacy__constructor_as_closure__t_Context [typeConverter].
const tests__legacy__constructor_as_closure__t_Context_default_value: tests__legacy__constructor_as_closure__t_Context.
letfun tests__legacy__constructor_as_closure__t_Context_default() =
       tests__legacy__constructor_as_closure__t_Context_default_value.
letfun tests__legacy__constructor_as_closure__t_Context_err() =
       let x = construct_fail() in tests__legacy__constructor_as_closure__t_Context_default_value.
fun tests__legacy__constructor_as_closure__Context_A(nat)
    : tests__legacy__constructor_as_closure__t_Context [data].
reduc forall tests__legacy__constructor_as_closure__0: nat;
    accessor_tests__legacy__constructor_as_closure__t_Context_tests__legacy__constructor_as_closure__0(
      tests__legacy__constructor_as_closure__Context_A(
        tests__legacy__constructor_as_closure__0
      )
    ) = tests__legacy__constructor_as_closure__0.
fun tests__legacy__constructor_as_closure__Context_B(nat)
    : tests__legacy__constructor_as_closure__t_Context [data].
reduc forall tests__legacy__constructor_as_closure__0: nat;
    accessor_tests__legacy__constructor_as_closure__t_Context_tests__legacy__constructor_as_closure__0(
      tests__legacy__constructor_as_closure__Context_B(
        tests__legacy__constructor_as_closure__0
      )
    ) = tests__legacy__constructor_as_closure__0.

(*****************************************)
(* Functions *)
(*****************************************)

letfun tests__legacy__constructor_as_closure__impl_Test__test(x : Option) =
       core_models__option__impl__map(
         x, tests__legacy__constructor_as_closure__Test
       ).

letfun tests__legacy__constructor_as_closure__impl_Context__test(x : Option) =
       core_models__option__impl__map(
         x, tests__legacy__constructor_as_closure__Context_B
       ).

