(*****************************************)
(* Preamble *)
(*****************************************)

channel c.

fun construct_fail() : bitstring
reduc construct_fail() = fail.

type Option.
fun Some(bitstring): Option [data].
fun None(): Option [data].
letfun Option_err() = let x = construct_fail() in None().

const empty: bitstring.
letfun bitstring_default() = empty.
letfun bitstring_err() = let x = construct_fail() in bitstring_default().

letfun nat_default() = 0.
fun nat_to_bitstring(nat): bitstring.
letfun nat_err() = let x = construct_fail() in nat_default().

letfun bool_default() = false.


(*****************************************)
(* Types and Constructors *)
(*****************************************)

type tests__legacy__proverif_ping_pong__lib__t_Message.

fun tests__legacy__proverif_ping_pong__lib__t_Message_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__t_Message
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__t_Message_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__t_Message [typeConverter].
const tests__legacy__proverif_ping_pong__lib__t_Message_default_value: tests__legacy__proverif_ping_pong__lib__t_Message.
letfun tests__legacy__proverif_ping_pong__lib__t_Message_default() =
       tests__legacy__proverif_ping_pong__lib__t_Message_default_value.
letfun tests__legacy__proverif_ping_pong__lib__t_Message_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__t_Message_default_value.
fun tests__legacy__proverif_ping_pong__lib__Message_Ping(nat)
    : tests__legacy__proverif_ping_pong__lib__t_Message [data].
reduc forall tests__legacy__proverif_ping_pong__lib__0: nat;
    accessor_tests__legacy__proverif_ping_pong__lib__t_Message_tests__legacy__proverif_ping_pong__lib__0(
      tests__legacy__proverif_ping_pong__lib__Message_Ping(
        tests__legacy__proverif_ping_pong__lib__0
      )
    ) = tests__legacy__proverif_ping_pong__lib__0.
fun tests__legacy__proverif_ping_pong__lib__Message_Pong(nat)
    : tests__legacy__proverif_ping_pong__lib__t_Message [data].
reduc forall tests__legacy__proverif_ping_pong__lib__0: nat;
    accessor_tests__legacy__proverif_ping_pong__lib__t_Message_tests__legacy__proverif_ping_pong__lib__0(
      tests__legacy__proverif_ping_pong__lib__Message_Pong(
        tests__legacy__proverif_ping_pong__lib__0
      )
    ) = tests__legacy__proverif_ping_pong__lib__0.

type tests__legacy__proverif_ping_pong__lib__b__t_B0.

fun tests__legacy__proverif_ping_pong__lib__b__t_B0_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__b__t_B0
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__b__t_B0_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__b__t_B0 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__b__t_B0_default_value: tests__legacy__proverif_ping_pong__lib__b__t_B0.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B0_default() =
       tests__legacy__proverif_ping_pong__lib__b__t_B0_default_value.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B0_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__b__t_B0_default_value.
fun tests__legacy__proverif_ping_pong__lib__b__B0()
    : tests__legacy__proverif_ping_pong__lib__b__t_B0 [data].


type tests__legacy__proverif_ping_pong__lib__b__t_B1.

fun tests__legacy__proverif_ping_pong__lib__b__t_B1_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__b__t_B1
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__b__t_B1_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__b__t_B1 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__b__t_B1_default_value: tests__legacy__proverif_ping_pong__lib__b__t_B1.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B1_default() =
       tests__legacy__proverif_ping_pong__lib__b__t_B1_default_value.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B1_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__b__t_B1_default_value.
fun tests__legacy__proverif_ping_pong__lib__b__B1(nat)
    : tests__legacy__proverif_ping_pong__lib__b__t_B1 [data].
reduc forall tests__legacy__proverif_ping_pong__lib__b__f_received: nat;
    accessor_tests__legacy__proverif_ping_pong__lib__b__t_B1_tests__legacy__proverif_ping_pong__lib__b__f_received(
      tests__legacy__proverif_ping_pong__lib__b__B1(
        tests__legacy__proverif_ping_pong__lib__b__f_received
      )
    ) = tests__legacy__proverif_ping_pong__lib__b__f_received.

type tests__legacy__proverif_ping_pong__lib__b__t_B1alt.

fun tests__legacy__proverif_ping_pong__lib__b__t_B1alt_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__b__t_B1alt
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__b__t_B1alt_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__b__t_B1alt [typeConverter].
const tests__legacy__proverif_ping_pong__lib__b__t_B1alt_default_value: tests__legacy__proverif_ping_pong__lib__b__t_B1alt.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B1alt_default() =
       tests__legacy__proverif_ping_pong__lib__b__t_B1alt_default_value.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B1alt_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__b__t_B1alt_default_value.
fun tests__legacy__proverif_ping_pong__lib__b__B1alt()
    : tests__legacy__proverif_ping_pong__lib__b__t_B1alt [data].


type tests__legacy__proverif_ping_pong__lib__b__t_B2.

fun tests__legacy__proverif_ping_pong__lib__b__t_B2_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__b__t_B2
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__b__t_B2_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__b__t_B2 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__b__t_B2_default_value: tests__legacy__proverif_ping_pong__lib__b__t_B2.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B2_default() =
       tests__legacy__proverif_ping_pong__lib__b__t_B2_default_value.
letfun tests__legacy__proverif_ping_pong__lib__b__t_B2_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__b__t_B2_default_value.
fun tests__legacy__proverif_ping_pong__lib__b__B2()
    : tests__legacy__proverif_ping_pong__lib__b__t_B2 [data].


type tests__legacy__proverif_ping_pong__lib__a__t_A0.

fun tests__legacy__proverif_ping_pong__lib__a__t_A0_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__a__t_A0
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__a__t_A0_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__a__t_A0 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__a__t_A0_default_value: tests__legacy__proverif_ping_pong__lib__a__t_A0.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A0_default() =
       tests__legacy__proverif_ping_pong__lib__a__t_A0_default_value.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A0_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__a__t_A0_default_value.
fun tests__legacy__proverif_ping_pong__lib__a__A0(nat)
    : tests__legacy__proverif_ping_pong__lib__a__t_A0 [data].
reduc forall tests__legacy__proverif_ping_pong__lib__a__f_data: nat;
    accessor_tests__legacy__proverif_ping_pong__lib__a__t_A0_tests__legacy__proverif_ping_pong__lib__a__f_data(
      tests__legacy__proverif_ping_pong__lib__a__A0(
        tests__legacy__proverif_ping_pong__lib__a__f_data
      )
    ) = tests__legacy__proverif_ping_pong__lib__a__f_data.

type tests__legacy__proverif_ping_pong__lib__a__t_A1.

fun tests__legacy__proverif_ping_pong__lib__a__t_A1_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__a__t_A1
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__a__t_A1_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__a__t_A1 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__a__t_A1_default_value: tests__legacy__proverif_ping_pong__lib__a__t_A1.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A1_default() =
       tests__legacy__proverif_ping_pong__lib__a__t_A1_default_value.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A1_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__a__t_A1_default_value.
fun tests__legacy__proverif_ping_pong__lib__a__A1()
    : tests__legacy__proverif_ping_pong__lib__a__t_A1 [data].


type tests__legacy__proverif_ping_pong__lib__a__t_A2.

fun tests__legacy__proverif_ping_pong__lib__a__t_A2_to_bitstring(
      tests__legacy__proverif_ping_pong__lib__a__t_A2
    )
    : bitstring [typeConverter].
fun tests__legacy__proverif_ping_pong__lib__a__t_A2_from_bitstring(bitstring)
    : tests__legacy__proverif_ping_pong__lib__a__t_A2 [typeConverter].
const tests__legacy__proverif_ping_pong__lib__a__t_A2_default_value: tests__legacy__proverif_ping_pong__lib__a__t_A2.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A2_default() =
       tests__legacy__proverif_ping_pong__lib__a__t_A2_default_value.
letfun tests__legacy__proverif_ping_pong__lib__a__t_A2_err() =
       let x = construct_fail() in tests__legacy__proverif_ping_pong__lib__a__t_A2_default_value.
fun tests__legacy__proverif_ping_pong__lib__a__A2(nat)
    : tests__legacy__proverif_ping_pong__lib__a__t_A2 [data].
reduc forall tests__legacy__proverif_ping_pong__lib__a__f_received: nat;
    accessor_tests__legacy__proverif_ping_pong__lib__a__t_A2_tests__legacy__proverif_ping_pong__lib__a__f_received(
      tests__legacy__proverif_ping_pong__lib__a__A2(
        tests__legacy__proverif_ping_pong__lib__a__f_received
      )
    ) = tests__legacy__proverif_ping_pong__lib__a__f_received.

(*****************************************)
(* Functions *)
(*****************************************)

letfun tests__legacy__proverif_ping_pong__lib__b__init_b(wildcard1 : bitstring) =
       tests__legacy__proverif_ping_pong__lib__b__B0().

letfun tests__legacy__proverif_ping_pong__lib__b__read_ping(
         e_state : tests__legacy__proverif_ping_pong__lib__b__t_B0,
         msg : tests__legacy__proverif_ping_pong__lib__t_Message
       ) =
       let tests__legacy__proverif_ping_pong__lib__Message_Ping(received) = msg in tests__legacy__proverif_ping_pong__lib__b__B1(
         received
       )
       else let tests__legacy__proverif_ping_pong__lib__Message_Pong(
         wildcard2: bitstring
       ) = msg in tests__legacy__proverif_ping_pong__lib__b__t_B1_err().

letfun tests__legacy__proverif_ping_pong__lib__b__read_ping_alt(
         e_state : tests__legacy__proverif_ping_pong__lib__b__t_B0,
         msg : tests__legacy__proverif_ping_pong__lib__t_Message
       ) =
       rust_primitives__hax__failure(
         "ExplicitRejection { reason: "a node of kind [Match_guard] have been found in the AST" }


Note: the error was labeled with context `reject_not_in_ProVerif`.
",
         "(match (msg) {
 tests::legacy__proverif_ping_pong__lib::Message_Ping(
 received,
 ) if let true = core::cmp::f_eq(received, 42) => {
 core::result::Result_Ok(tests::legacy__proverif_ping_pong__lib::b:..."
       ).

letfun tests__legacy__proverif_ping_pong__lib__b__write_pong(
         state : tests__legacy__proverif_ping_pong__lib__b__t_B1
       ) =
       (
         tests__legacy__proverif_ping_pong__lib__b__B2(),
         tests__legacy__proverif_ping_pong__lib__Message_Pong(
           accessor_tests__legacy__proverif_ping_pong__lib__b__t_B1_tests__legacy__proverif_ping_pong__lib__b__f_received(
             state
           )
         )
       ).

letfun tests__legacy__proverif_ping_pong__lib__a__init_a(prologue : bitstring) =
       if core__cmp__f_lt(alloc__vec__impl_1__len(prologue), 1)
       then (tests__legacy__proverif_ping_pong__lib__a__t_A0_err())
       else (
         tests__legacy__proverif_ping_pong__lib__a__A0(
           core__ops__index__f_index(prologue, 0)
         )
       ).

letfun tests__legacy__proverif_ping_pong__lib__a__write_ping(
         state : tests__legacy__proverif_ping_pong__lib__a__t_A0
       ) =
       (
         tests__legacy__proverif_ping_pong__lib__a__A1(),
         tests__legacy__proverif_ping_pong__lib__Message_Ping(
           accessor_tests__legacy__proverif_ping_pong__lib__a__t_A0_tests__legacy__proverif_ping_pong__lib__a__f_data(
             state
           )
         )
       ).

letfun tests__legacy__proverif_ping_pong__lib__a__read_pong(
         e_state : tests__legacy__proverif_ping_pong__lib__a__t_A1,
         msg : tests__legacy__proverif_ping_pong__lib__t_Message
       ) =
       let tests__legacy__proverif_ping_pong__lib__Message_Ping(
         wildcard3: bitstring
       ) = msg in tests__legacy__proverif_ping_pong__lib__a__t_A2_err()
       else let tests__legacy__proverif_ping_pong__lib__Message_Pong(received) = msg in tests__legacy__proverif_ping_pong__lib__a__A2(
         received
       ).

